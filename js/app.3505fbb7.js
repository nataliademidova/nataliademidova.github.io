(function(e){function t(t){for(var a,s,i=t[0],l=t[1],u=t[2],d=0,m=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(m.length)m.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==o[l]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},o={app:0},r=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"01d7":function(e,t,n){},"02e9":function(e,t,n){},"0a90":function(e,t,n){"use strict";var a=n("9b8f"),o=n.n(a);o.a},"146f":function(e,t,n){"use strict";var a=n("1b70"),o=n.n(a);o.a},"15e8":function(e,t,n){"use strict";var a=n("01d7"),o=n.n(a);o.a},"1b70":function(e,t,n){},4542:function(e,t,n){},"4d98":function(e,t,n){"use strict";var a=n("f2db"),o=n.n(a);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=(n("599e"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("BaseLayout",{attrs:{"is-open":e.isOpen},scopedSlots:e._u([{key:"info",fn:function(){return[n("base-info",{attrs:{info:e.info},on:{"close-info":e.handleCloseInfo}})]},proxy:!0}])},[n("TableGrid",{on:{"open-info":e.handleOpenInfo,"close-info":e.handleCloseInfo,"open-discuss-modal":e.handleOpenModal}})],1)],1)}),r=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ag-grid-vue",{staticClass:"ag-theme-alpine",staticStyle:{height:"calc(100vh - 60px)"},attrs:{columnDefs:e.columnDefs,rowData:e.rowData,rowSelection:"multiple",getContextMenuItems:e.getContextMenuItems},on:{"grid-ready":e.onGridReady,"data-model-changed":e.dataModelChanged,"selection-changed":e.onSelectionChanged,"row-selected":e.onRowSelected,cellContextMenu:e.onCellClicked}})},i=[],l=n("401b"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"salary-edit"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.value.currency,expression:"value.currency"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.value,"currency",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"RUB"}},[e._v("RUB")]),n("option",{attrs:{value:"USD"}},[e._v("USD")]),n("option",{attrs:{value:"EUR"}},[e._v("EUR")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value.value,expression:"value.value"}],staticClass:"base-input",attrs:{type:"number",size:"10"},domProps:{value:e.value.value},on:{input:function(t){t.target.composing||e.$set(e.value,"value",t.target.value)}}})])},c=[],d={name:"SalaryEditRow",data:function(){return{value:null}},beforeMount:function(){this.value=this.params.value},watch:{value:{deep:!0,handler:function(e,t){t&&(this.value.status="updated")}}},methods:{getValue:function(){return this.value},setValue:function(e){this.value=e},isCancelBeforeStart:function(){return!1},isCancelAfterEnd:function(){return!1}}},m=d,f=(n("15e8"),n("2877")),p=Object(f["a"])(m,u,c,!1,null,"2c32ff29",null),v=p.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["currency","status-"+e.params.value.status]},[e.params.value.status?n("div",{staticClass:"comment"},[e.isAgreed?n("span",[e._v("🙂")]):n("span",[e._v("🗨")])]):e._e(),e._v("\n\n  "+e._s(e._f("currency")(e.params.value))+"\n")])},g=[],y=(n("c5f6"),{filters:{currency:function(e){var t=e.value,n=e.currency,a=Number(t);return isNaN(t)||(a=Number(t).toFixed(0)),n?"".concat(n," ").concat(a):a}},computed:{isAgreed:function(){return"agreed"===this.params.value.status}}}),_=y,w=(n("0a90"),Object(f["a"])(_,h,g,!1,null,"4c007830",null)),b=w.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n  "+e._s(e.params.value.join(", "))+"\n")])},x=[],S={name:"TagsRow"},R=S,O=Object(f["a"])(R,C,x,!1,null,"49d0086d",null),E=O.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{multiple:"",size:"2"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"пересмотр в августе"}},[e._v("Пересмотр в августе")]),n("option",{attrs:{value:"ожидал большего"}},[e._v("Ожидал большего")]),n("option",{attrs:{value:"риск ухода"}},[e._v("Риск ухода")])])])},j=[],$={name:"TagsEditRow",data:function(){return{value:null}},beforeMount:function(){this.value=this.params.value},methods:{getValue:function(){return this.value},setValue:function(e){this.value=e},isCancelBeforeStart:function(){return!1},isCancelAfterEnd:function(){return!1}}},T=$,k=Object(f["a"])(T,N,j,!1,null,"8137e6e0",null),M=k.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("✓")])},D=[],B={name:"CommentRow"},P=B,F=Object(f["a"])(P,A,D,!1,null,"b72a5f30",null),I=F.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"float-element"},[n("comments-view",{attrs:{comments:e.comments}})],1)])},V=[],G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("comments-list",{attrs:{comments:e.comments}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],attrs:{type:"text",placeholder:"Комментарий..."},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}})],1)},L=[],q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.comments?n("div",e._l(e.comments,(function(e,t){return n("base-comment",{key:t,attrs:{author:e.author,"date-time":e.datetime,text:e.text,status:e.status}})})),1):e._e()},z=[],J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["comment","status-"+e.status]},[n("div",{staticClass:"headline"},[n("span",{staticClass:"author"},[e._v(e._s(e.author))]),n("span",{staticClass:"datetime"},[e._v(e._s(e.dateTime))])]),n("div",{staticClass:"text"},[e._v("\n    "+e._s(e.text)+"\n  ")])])},W=[],H={name:"BaseComment",props:{author:{type:String,required:!0},text:{type:String,required:!0},status:{type:String},dateTime:{type:String}}},K=H,Q=(n("e74f"),Object(f["a"])(K,J,W,!1,null,"6d45d069",null)),X=Q.exports,Y={name:"PrevComments",components:{BaseComment:X},props:{comments:{type:Array,default:function(){return[]}}}},Z=Y,ee=Object(f["a"])(Z,q,z,!1,null,"02de9fd5",null),te=ee.exports,ne={name:"CommentsView",data:function(){return{comment:null}},props:{comments:{type:Array}},components:{CommentsList:te}},ae=ne,oe=Object(f["a"])(ae,G,L,!1,null,"520516f9",null),re=oe.exports,se={name:"CommentEditRow",components:{CommentsView:re},data:function(){return{value:null,comments:[]}},beforeMount:function(){this.value=this.params.value,this.comments=this.value.comments},methods:{getValue:function(){return this.value},setValue:function(e){this.value=e},isCancelBeforeStart:function(){return!1},isCancelAfterEnd:function(){return!1}}},ie=se,le=(n("4d98"),Object(f["a"])(ie,U,V,!1,null,"1b33f138",null)),ue=le.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n  "+e._s(e.delta)+" %\n")])},de=[],me={name:"DeltaShowRow",beforeMount:function(){console.log(this.params)},computed:{delta:function(){var e=this.params.data,t=e.salary,n=e.new_salary;return Number((Number(n.value)-Number(t.value))/Number(t.value)*100)}}},fe=me,pe=Object(f["a"])(fe,ce,de,!1,null,"deb8071a",null),ve=pe.exports,he=[{headerName:"Сотрудник",field:"employee",rowSelection:!0,checkboxSelection:!0,pinned:!0},{headerName:"Должность",field:"position",rowSelection:!0,pinned:!0},{headerName:"Менеджер",field:"manager"},{headerName:"Город",field:"city"},{headerName:"Актуальная ЗП",field:"salary",cellRendererFramework:"SalaryShowRow"},{headerName:/&#10003;/,field:"discuss",editable:!0,cellRendererFramework:"CommentShowRow",cellEditorFramework:"CommentEditRow",width:90},{headerName:"Пересмотр ЗП",field:"new_salary",cellRendererFramework:"SalaryShowRow",cellEditorFramework:"SalaryEditRow",width:230,editable:!0},{headerName:"Дельта",field:"delta",width:100,cellRendererFramework:"DeltaShowRow"},{headerName:"Комментарий",field:"comment",editable:!0,minWidth:300},{headerName:"Теги",field:"tags",cellEditorFramework:"TagsEditRow",cellRendererFramework:"TagsRow",editable:!0}],ge=[{employee:"Ivanov Ivan",position:"Programmer",manager:"Nimov Nimovich",city:"Vologda",salary:{currency:"RUB",value:2e5},new_salary:{currency:"RUB",value:201e3,status:"discussion"},delta:.3,comment:"text",tags:[],discuss:{comments:[{id:1,author:"Tomas",datetime:"2020-11-11 12:11",text:"Привет! Думаю тут нужно увеличить, оценка хорошая, мау!"}]}},{employee:"Smirnova Svetlana",position:"Programmer",manager:"Nimov Nimovich",city:"Saint-Peterburg",salary:{currency:"USD",value:2e3},new_salary:{currency:"USD",value:3e3,status:"agreed"},delta:.3,comment:"Рыбатекст используется дизайнерами",tags:["риск ухода"],discuss:{comments:[{id:1,author:"Tomas",datetime:"2020-11-11 12:11",text:"Привет! Думаю тут нужно увеличить, оценка хорошая, мау!"}]}},{employee:"@tomas_mister_cat",position:"Programmer",manager:"Nimov Nimovich",city:"Msk",salary:{currency:"USD",value:2e3},new_salary:{currency:"EUR",value:6e3,status:"agreed"},delta:.3,comment:"",tags:["пересмотр в августе"],discuss:{comments:[{id:1,author:"Tomas",datetime:"2020-11-11 12:11",text:"Привет! Думаю тут нужно увеличить, оценка хорошая, мау!",status:"accept"},{id:2,author:"Top manager",datetime:"2020-11-11 12:20",text:"Привет! Надо подумать!",status:""},{id:3,author:"Top manager",datetime:"2020-11-11 12:20",text:"Подумал, посмотрел оценочки, действительно надо увеличить",status:""},{id:4,author:"Top manager",datetime:"2020-11-11 12:20",text:"в 3 раза",status:""},{id:4,author:"Top manager",datetime:"2020-11-11 12:20",text:"в 10 раз!",status:""},{id:5,author:"Tomas",datetime:"2020-11-11 12:20",text:"Ура-мурмя!",status:""}]}}],ye={name:"App",data:function(){return{columnDefs:null,rowData:null,gridApi:null,columnApi:null}},components:{AgGridVue:l["AgGridVue"],SalaryShowRow:b,SalaryEditRow:v,TagsRow:E,TagsEditRow:M,CommentShowRow:I,CommentEditRow:ue,DeltaShowRow:ve},beforeMount:function(){this.columnDefs=he,this.rowData=ge},methods:{onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi,console.log("onGridReady",e)},dataModelChanged:function(e){console.log("dataModelChanged",e)},onSelectionChanged:function(){var e=this.gridApi.getSelectedRows();console.log("selectedRows",e),1===e.length?this.$emit("open-info",e[0]):this.$emit("close-info")},onRowSelected:function(e){console.log(" selected = "+e.node.selected)},onCellClicked:function(e){console.log("event",e)},getContextMenuItems:function(e){var t=this;return[{name:"Карточка сотрудника: ".concat(e.node.data.employee),cssClasses:[],action:function(){e.node.data.new_salary.status="discussion",t.$emit("open-info",e.node.data)}},{name:"Утвердить",icon:"✓",cssClasses:["green"],action:function(){e.node.data.new_salary.status="agreed"}},{name:"Обсудить",cssClasses:["red"],action:function(){e.node.data.new_salary.status="discussion",t.$emit("open-info",e.node.data)}}]}}},_e=ye,we=(n("146f"),Object(f["a"])(_e,s,i,!1,null,null,null)),be=we.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout"},[n("div",{staticClass:"header"},[e._v("\n    SSR\n  ")]),n("div",{staticClass:"container"},[n("div",{staticClass:"table"},[e._t("default")],2),e.isOpen?n("div",{staticClass:"info"},[e._t("info")],2):e._e()])])},xe=[],Se={name:"BaseLayout",props:{isOpen:{type:Boolean}}},Re=Se,Oe=(n("d21a"),Object(f["a"])(Re,Ce,xe,!1,null,null,null)),Ee=Oe.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"info-block"},[n("h2",[e._v("\n    Сотрудник: "+e._s(e.info.employee)+"\n    "),n("button",{staticStyle:{"margin-left":"10px"},on:{click:e.handleClose}},[e._v("x")])]),n("h3",[e._v("Информация по пересмотру")]),n("p",[e._v("\n    Актуальная зп: "+e._s(e._f("salaryFilter")(e.info.salary))+"\n  ")]),n("p",[e._v("\n    Пересмотр зп: "+e._s(e._f("salaryFilter")(e.info.new_salary))+"\n  ")]),e.info.tags.length?n("p",[e._v("\n    Теги: "+e._s(e.info.tags.join(", "))+"\n  ")]):e._e(),n("comments-view",{attrs:{comments:e.info.discuss.comments}})],1)},je=[],$e={name:"BaseInfo",components:{CommentsView:re},props:{info:{type:Object}},methods:{handleClose:function(){this.$emit("close-info")}},filters:{salaryFilter:function(e){var t=e.value,n=e.currency;return"".concat(n," ").concat(t)}}},Te=$e,ke=(n("a680"),Object(f["a"])(Te,Ne,je,!1,null,"25b4c354",null)),Me=ke.exports,Ae={name:"app",data:function(){return{isOpen:!1,info:null}},methods:{handleOpenInfo:function(e){console.log(e),this.info=e,this.isOpen=!0},handleCloseInfo:function(){this.isOpen=!1,this.info=null},handleOpenModal:function(e){console.log("data",e)}},components:{BaseInfo:Me,BaseLayout:Ee,TableGrid:be}},De=Ae,Be=(n("5c0b"),Object(f["a"])(De,o,r,!1,null,null,null)),Pe=Be.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(Pe)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var a=n("e332"),o=n.n(a);o.a},"9b8f":function(e,t,n){},a680:function(e,t,n){"use strict";var a=n("02e9"),o=n.n(a);o.a},d21a:function(e,t,n){"use strict";var a=n("e557"),o=n.n(a);o.a},e332:function(e,t,n){},e557:function(e,t,n){},e74f:function(e,t,n){"use strict";var a=n("4542"),o=n.n(a);o.a},f2db:function(e,t,n){}});
//# sourceMappingURL=app.3505fbb7.js.map